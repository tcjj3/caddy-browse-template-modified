
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>LatestImage - GK-2A Satellite Receive Server by tcjj3 (BG7XUD)</title>

<script type="text/javascript">
var paused = false;

function showImage() {
	setImage();
	if (!paused) {
		var o = document.getElementById("ScriptSpan"); //document.body;
		while(o.hasChildNodes()) {
			o.removeChild(o.firstChild);
		}
		var sc = document.createElement("script");
		sc.src = "LatestImage.js" + "?t=" + Date.now();
		o.appendChild(sc);
	}
	self.setTimeout("showImage()", 1000);
}

function startToShowImage() {
	showImage();
}

function Callback_Image(url) {
	var w = document.documentElement.clientWidth;
	if (w <= 0) w = document.body.clientWidth;
	if (w > 10) w -= 10;
	
	var h = document.documentElement.clientHeight;
	if (h <= 0) h = document.body.clientHeight;
	if (h > 10) h -= 10;
	
	var img = document.getElementById("image");
	if (img.src != url) {
		img.width = w;
		img.height = h;
		img.style.width = w;
		img.style.height = h;
		img.style.position = "absolute";
		img.style.zIndex = -1;
		//img.onload = imageOnload;
		//img.onerror = imageError;
		img.onclick = imageOnclick;
		img.src = url;
	}
}

function setImage() {
	var w = document.documentElement.clientWidth;
	if (w <= 0) w = document.body.clientWidth;
	if (w > 10) w -= 10;
	
	var h = document.documentElement.clientHeight;
	if (h <= 0) h = document.body.clientHeight;
	if (h > 10) h -= 10;
	
	var img = document.getElementById("image");
	img.width = w;
	img.height = h;
	img.style.width = w;
	img.style.height = h;
	img.style.position = "absolute";
	img.style.zIndex = -1;
	//img.onload = imageOnload;
	//img.onerror = imageError;
	img.onclick = imageOnclick;
}

function imageOnclick() { // Clicking on the image will pause the update
	paused = !paused;
}

function Callback_LatestFullDisk(url) {
	if (!paused) Callback_Image(url);
}

function Callback_LatestFullDisk_fc(url) {
	if (!paused) Callback_Image(url);
}

function Callback_LatestMerged(url) {
	if (!paused) Callback_Image(url);
}
</script>

</head>
<body onload="startToShowImage();">

<span id="ScriptSpan"></span>
<span><img id="image" src="" /></span>

</body>
</html>
